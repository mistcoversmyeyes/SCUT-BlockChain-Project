好的，这是将两个校正后的Markdown文档合并输出到一个代码块中的结果。

# 2025《区块链技术与应用》(微众银行)

# 大作业：在区块链上构建应用系统

## 一、背景与目标

本作业面向已掌握区块链基本概念与以太坊开发入门的学生：

- 使用 Web3j 构建一个基于 Spring Boot 的后端应用 (提供REST/CLI 接口与区块链交互)
- 使用 scaffold-eth-2 搭建一个纯前端 DApp (通过浏览器钱包与区块链交互)

### 作业背景

Web3 应用由“智能合约+客户端/服务端”组成。后端应用通常通过 Web3j 等SDK承担业务编排、签名与链上调用；前端DApp则直接通过钱包与合约交互(如MetaMask)。

通过本作业, 学生将贯通“合约 → 工程化 → 部署与交互”的完整链路, 形成端到端的 Web3 应用开发能力。

### 作业目标

1.  能够编写与编译 Solidity 智能合约, 理解ABI、字节码及网络部署流程。
2.  熟练使用 Web3j 生成合约 Java 封装, 基于 Spring Boot 实现与区块链交互的 REST 接口。
3.  掌握 React 前端项目结构与合约集成, 完成一个可交互的DApp。
4.  了解本地链(Hardhat)、测试网、主网的差异与密钥/节点管理的安全实践。
5.  具备最小可用产品(MVP)级别的需求分析、接口设计、测试与文档产出能力。

### 作业产出

1.  可运行的后端服务与前端 DApp
2.  在线源代码, github、gitee等的git在线仓库, 需要包含: 后端服务源码、合约源码与前端部署
3.  大作业报告
4.  部署到测试网并提供交互证明(交易哈希/区块浏览器链接)
5.  可选: 演示视频(3-5分钟)

## 二、实验步骤

**说明:**
* 需要团队协作(≤3人), 需标注分工。
* 需要在测试链完成开发与自测。

### 2.1 使用 Web3J 构建后台应用

**前置要求:**
* JDK 21+, Gradle
* Node.js 18+ (用于合约工具链)

#### 2.1.1 下载 Spring-boot-web3j 示例代码

为了同学们快速上手, 提供了Spring-boot + web3J的示例代码, 后续同学们基于该项目仓库进行修改即可。

**代码仓库:**
[https://github.com/kyonRay/spring-boot-web3j](https://github.com/kyonRay/spring-boot-web3j)

````

**代码结构:**
```plaintext
./src/main/
├── java
│   └── com
│       └── wetech
│           └── demo
│               └── web3j
│                   ├── Application.java              # App总入口
│                   ├── config
│                   │   └── Web3jConfig.java          # Web3J 配置
│                   ├── contracts                   # 合约编译 Java 接口目录
│                   │   └── simplestorage
│                   │       └── SimpleStorage.java    # 合约编译成的Java接口文件
│                   ├── controller
│                   │   └── SimpleStorageController.java # Spring-boot Controller
│                   └── service
│                       └── SimpleStorageService.java   # Spring-boot Service
└── resources
    ├── application.properties        # APP 配置文件
    └── contracts
        └── SimpleStorage.sol         # 智能合约
````

**配置文件说明 (`application.properties`):**

```properties
# Server configuration
server.port=8080 #服务监听端口

# Web3j configuration
web3j.client-address=[https://rpc-testnet.potos.hk](https://rpc-testnet.potos.hk) #链的URL
#发交易时的私钥,不要轻易泄露,可以从 MetaMask 中获取
web3j.private-key=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
web3j.gas-price=20000000000
web3j.gas-limit=6721975

# Logging configuration
logging.level.root=INFO
logging.level.com.wetech.demo.web3j=DEBUG
logging.level.org.web3j=INFO
```

#### 2.1.2 将你的智能合约编译成Java 接口文件

在实验2中我们实现了一个ERC20合约, 现在我们将该合约编译成Java 接口文件, 并集成到Spring-boot 项目中。

1.  **将合约放到 `src/resources/contracts` 目录下**。
2.  **执行Gradle命令**：
    在IDEA中可以直接操作，或者在命令行中执行命令：
    ```bash
    bash gradlew generateContractWrappers
    ```
    执行成功后, 将在 `src/main/java/com/wetech/demo/web3j/contracts` 目录下生成合约的Java接口文件。

#### 2.1.3 运行项目并访问其HTTP 服务

在IDEA点击 `Application.java` 中的按钮即可编译运行服务, 也可以在命令行中执行命令运行服务。

```bash
# 编译项目
bash gradlew build

# 运行项目
bash gradlew bootRun
```

服务启动, 并监听8080端口。

**接口调用示例：**

```bash
# 部署合约:
curl -X POST http://localhost:8080/api/storage/deploy

# 调用合约的 setValue 接口:
curl -X POST http://localhost:8080/api/storage/value/set?value=100

# 调用合约的 getValue接口:
curl -X GET http://localhost:8080/api/storage/value/get
```

### 2.2 构建前端 DApp

**前置要求:**

  * Node.js 18+、pnpm 或 yarn
  * 钱包(MetaMask), 了解测试网与账户管理

#### 2.2.1 下载 my-first-dapp 代码

为了同学们快速上手, 提供了React TS +Next.js + Hardhat + Viem的示例代码。

**代码仓库:**


[https://github.com/kyonRay/my-first-dapp](https://github.com/kyonRay/my-first-dapp)


**项目结构:**

```plaintext
./packages/
├── hardhat               # 智能合约合约脚手架目录
│   ├── contracts         ## 合约目录
│   ├── deploy            ## 部署脚本
│   ├── deployments       ## 部署结果
│   └── hardhat.config.ts ## hardhat 配置
└── nextjs                # 前端项目目录
    ├── app               ## 前端 app 主目录
    ├── components        ## 前端组件
    ├── contracts         ## 前端合约调用ABI
    ├── hooks             ## React hooks
    └── scaffold.config.ts## 链相关配置
```

**编译项目:**

```bash
yarn install
```

#### 2.2.2 编译合约代码

将您在实验2中实现的ERC20合约集成到前端项目中。

1.  **将合约放到 `packages/hardhat/contracts/` 目录下**。
2.  **在命令行中执行命令:**
    ```bash
    yarn compile
    ```

#### 2.2.3 部署合约到区块链

1.  **在 `packages/hardhat/deploy` 目录下放置部署ts文件**。
2.  **在命令行中输入以下命令即可完成部署**：
    ```bash
    yarn deploy --tags MockERC20
    ```
    部署成功后, 会在 `packages/hardhat/deployments` 目录下生成部署信息, 并且会自动更改前端的合约配置信息。

#### 2.2.4 在页面上操作智能合约

1.  **在命令行中输入命令, 即可在本地启动 node 服务**：
    ```bash
    yarn start
    ```
2.  **在浏览器中访问 `http://localhost:3000` 就能看到界面**。
3.  在 **Debug Contracts** 界面中可以看到在测试网中部署的合约, 连接钱包即可进行调用。

## 三、大作业任务

根据各个组员的实际情况, 分工完成以下任务：

### 后台应用:

  - 仿照 `service` 和 `controller` 的写法, 将你在实验2的ERC20合约集成到 `Spring-boot-web3j` 服务中。要求实现ERC20的`mint`、`transfer`、`balanceOf`、`approve`、`transferFrom` 的接口。
  - 在命令行调用服务HTTP接口, 部署你的ERC20合约, 调用以上所有实现的接口。

### 前端 DAPP:

  - 仿造上述 `MockERC20` 的做法, 将你在实验2实现的ERC20合约集成到`my-first-dapp` 前端项目中。
  - 仿造 `packages/hardhat/deploy/00_deploy_your_contract.ts`的写法, 写一个属于你的 ERC20 合约的ts 部署脚本。**此处要求部署的tags为`ERC20+名字缩写+组长学号`**, 比如张三的学号是2022001, 那么张三在此处的tags为: `ERC20ZS2022001`。
  - 通过前端 Debug Contracts 页面操作合约的调用, 调用ERC20的`mint`、`transfer`、`approve`、`transferFrom` 接口。

-----

# 2025《区块链技术与应用》课程 大作业评分标准

**任务编制人：** 许可

## 1、大作业评分标准

需按要求撰写报告。大作业 (100 分) = 任务 2.1 (50 分) + 任务 2.2 (50 分)。详细的评分标准如下：

| 考核项 | 分数 | 评分细目 |
| :--- | :--- | :--- |
| **任务 2.1** | **(50分)** | |
| 报告质量 | 10 分 | 报告排版良好, 截图清晰 |
| 示例代码下载 | 5 分 | 1. 截图 (2分)<br>2. 对应文字说明 (3分) |
| 集成智能合约 | 15 分 | 1. 编译合约流程截图 (2分)<br>2. 文字说明 (3分)<br>3. 仿照 service 和 controller 的写法, 实现 `mint`、`transfer`、`balanceOf`、`approve`、`transferFrom` 的接口 (文字解释+代码) (10分) |
| 运行与部署 | 5 分 | 1. 部署合约流程截图 (2分)<br>2. 对应文字说明 (3分) |
| 调用合约接口 | 15 分 | 1. 调用合约所有实现接口的截图及文字说明 (`mint`、`transfer`、`balanceOf`、`approve`、`transferFrom`) (每个1分)<br>2. 验证接口调用成功截图以及文字说明 (`mint`、`transfer`、`balanceOf`、`approve`、`transferFrom`) (每个2分) |
| **任务 2.2** | **(50分)** | |
| 报告质量 | 10 分 | 报告排版良好, 截图清晰 |
| 示例代码下载 | 5 分 | 1. 截图 (2分)<br>2. 对应文字说明 (3分) |
| 编译合约代码 | 5 分 | 1. 编译流程截图 (2分)<br>2. 文字说明 (3分) |
| 部署合约 | 14 分 | 1. 实现合约部署的 Typescript 代码 (文字解释+代码) (10分)<br>2. 部署合约流程 (2分)<br>3. 文字说明 (2分) |
| 调用合约接口 | 16 分 | 1. 调用合约所有实现接口的截图及文字说明 (`mint`、`transfer`、`approve`、`transferFrom`) (每个2分)<br>2. 验证接口调用成功截图以及文字说明 (`mint`、`transfer`、`approve`、`transferFrom`) (每个2分) |
| **其他扣分项** | | 抄袭他人报告不给分 |

## 二、大作业报告提交方法

请各位同学认真参照本任务书和评分标准, 基于大作业报告模板撰写规范的大作业报告。

**注意：**

1.  所有同学必须使用统一的大作业报告模版, 该模版已上传至教学在线。各位同学在提交自己的大作业报告时, 需要在大作业报告的文件名处填好组号和组长名, 譬如：`第X组_组长姓名_《区块链技术与应用》课程大作业报告`。
2.  大作业报告统一提交到助教邮箱：`zhenqiye02@foxmail.com` 或者 `1724062304@qq.com`。
3.  大作业报告内容最晚提交时间为2025年x月xx日晚24点。若重复提交, 以最后一次提交文件为准。

<!-- end list -->

```
```